<!-- HTML header for doxygen 1.8.16-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenSim Moco: Moco User Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen-style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenSim Moco
   &#160;<span id="projectnumber">0.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Moco User Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#gettingstartedsection">Getting started</a></li>
<li class="level1"><a href="#mocotool">MocoTools</a></li>
<li class="level1"><a href="#mocostudysection">Solving custom optimal control problems</a></li>
<li class="level1"><a href="#choosingmodel">Choosing a Model</a></li>
<li class="level1"><a href="#customgoal">Defining a custom goal or cost</a></li>
<li class="level1"><a href="#utilities">Utilities</a></li>
<li class="level1"><a href="#faqsection">Frequently Asked Questions</a></li>
<li class="level1"><a href="#mococheatsheet">Cheat sheet</a></li>
</ul>
</div>
<div class="textblock"><p><br />
 This guide shows the various ways of using Moco.</p>
<h1><a class="anchor" id="gettingstartedsection"></a>
Getting started</h1>
<p>To learn how to download, install, and run your first Moco example, see the following page:</p><ul>
<li><a class="el" href="gettingstarted.html">Getting started</a></li>
</ul>
<h1><a class="anchor" id="mocotool"></a>
MocoTools</h1>
<p>Moco provides easy-to-use tools for solving for muscle activity that can achieve an observed motion. See the following pages:</p>
<ul>
<li><a class="el" href="mocotrack.html">MocoTrack: kinematics are tracked in the cost</a></li>
<li><a class="el" href="mocoinverse.html">MocoInverse: kinematics are prescribed</a></li>
</ul>
<p>These tools derive from the <a class="el" href="class_open_sim_1_1_moco_tool.html" title="This is a base class for solving problems that depend on an observed motion using Moco&#39;s optimal cont...">MocoTool</a> class.</p>
<h1><a class="anchor" id="mocostudysection"></a>
Solving custom optimal control problems</h1>
<p>If the <a class="el" href="class_open_sim_1_1_moco_tool.html" title="This is a base class for solving problems that depend on an observed motion using Moco&#39;s optimal cont...">MocoTool</a>s do not satisfy your needs, you can create and solve your own custom optimal control problem using the <a class="el" href="class_open_sim_1_1_moco_study.html" title="The top-level class for solving a custom optimal control problem. ">MocoStudy</a> class.</p>
<p><a class="el" href="mocostudy.html">MocoStudy: custom optimal control problems</a></p>
<h1><a class="anchor" id="choosingmodel"></a>
Choosing a Model</h1>
<p>Moco supports most <a class="el" href="namespace_open_sim.html" title="The utilities in this file are categorized as follows: ">OpenSim</a> models, including those with kinematic constraints, auxiliary (muscle) dynamics, and passive force components.</p>
<p>Currently, Moco does not support models with Controllers. Moco must serve as the sole controller of the model. This prevents, for example, using reflex controllers to model spasticity. We hope to add support for Model Controllers in the future.</p>
<p>Moco does not support models with SimTK::Measures, such as Probes. Some Measures rely on time-stepping forward integration, which does not occur with Moco. This prevents using, for example, the metabolics probes with Moco.</p>
<p>Some model components are supported through Moco but may hinder the solvers from converging quickly. Any components with discontinuous functions can cause issues for the derivative-based optimization algorithms used by Moco. We suggest replacing your model's muscles with <a class="el" href="class_open_sim_1_1_de_groote_fregly2016_muscle.html" title="This muscle model was published in De Groote et al. ">DeGrooteFregly2016Muscle</a>s and replacing your contact forces with SmoothSphereHalfSpaceForces. These components are designed for use with direct collocation.</p>
<h1><a class="anchor" id="customgoal"></a>
Defining a custom goal or cost</h1>
<p>Moco allows you to compose your cost from multiple existing cost terms. This gives you flexibility and means that you usually do not need to write your cost yourself, even if it has many terms. Moco's existing costs are usually well-tested and work well with Moco's solvers, so we encourage you to use them if possible. In the case that you want to create your own custom cost term, you can derive from <a class="el" href="class_open_sim_1_1_moco_goal.html" title="A goal is term in the cost functional to be minimized, or a set of endpoint constraints that must lie...">MocoGoal</a> in C++. See <a class="el" href="example_sliding_mass_advanced_8cpp-example.html">exampleSlidingMassAdvanced.cpp</a> and <a class="el" href="example_moco_custom_effort_goal_8cpp-example.html">exampleMocoCustomEffortGoal.cpp</a>.</p>
<p>If you do not want to write C++ code, you can prototype your cost in MATLAB and we can help convert it to C++. See the Matlab example <a class="el" href="example_prototype_custom_goal_8m-example.html">examplePrototypeCustomGoal.m</a> for more information.</p>
<p>In the future, Moco could allow you to define custom cost terms in Python. If this is of interest to you, please let the Moco developers know (on GitHub).</p>
<h1><a class="anchor" id="utilities"></a>
Utilities</h1>
<p>Moco contains utilities for creating models, modifying models, working with data, and postprocessing results.</p>
<ol type="1">
<li><a class="el" href="class_open_sim_1_1_model_factory.html" title="This class provides utilities for creating OpenSim models. ">ModelFactory</a>: Create standard models and modify existing models.</li>
<li><a class="el" href="class_open_sim_1_1_model_processor.html" title="This class describes a workflow for processing a Model using ModelOperators. ">ModelProcessor</a>: Create a workflow of operations to perform on a model.</li>
<li><a class="el" href="class_open_sim_1_1_table_processor.html" title="This class describes a workflow for processing a table using TableOperators. ">TableProcessor</a>: Create a workflow of operations to perform on a table.</li>
<li><a class="el" href="group__mocomodelutil.html">Model and trajectory utilities</a>, including visualizing and analyzing a <a class="el" href="class_open_sim_1_1_moco_trajectory.html" title="The values of the variables in an optimal control problem. ">MocoTrajectory</a>.</li>
<li><a class="el" href="group__moconumutil.html">Numeric and data utilities</a>, including interpolating data and reading/writing tables.</li>
<li>plot_trajectory.py: Plot a <a class="el" href="class_open_sim_1_1_moco_trajectory.html" title="The values of the variables in an optimal control problem. ">MocoTrajectory</a> with the Python Matplotlib plotting library.</li>
<li>report.py: Generate a detailed PDF report about a <a class="el" href="class_open_sim_1_1_moco_trajectory.html" title="The values of the variables in an optimal control problem. ">MocoTrajectory</a> and any reference data (part of the <code>opensim</code> Python package).</li>
</ol>
<p>Some less important utilities are described on the <a class="el" href="group__mocologutil.html">String and logging utilities</a> and <a class="el" href="group__mocogenutil.html">Generic utilities</a> pages.</p>
<h1><a class="anchor" id="faqsection"></a>
Frequently Asked Questions</h1>
<p>See <a class="el" href="faq.html">Frequently Asked Questions</a>.</p>
<h1><a class="anchor" id="mococheatsheet"></a>
Cheat sheet</h1>
<p>This short PDF shows common Moco commands, and makes for a nice desk-side companion.</p>
<p> 
<embed src="MocoCheatSheet.pdf" width="500px" height="600px"></embed>
 </p>
</div></div><!-- contents -->
</body>
</html>
